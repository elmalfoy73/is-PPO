## Дополнение функциональных требований
Неавторизованный пользователь (гость) имеет возможность только авторизоваться/зарегистрироваться в системе
- Для регистрации нужны логин пароль, минимальная длина логина - 5 символов, логин может содержать только буквы латинского алфавита и цифры и должен быть уникальным. Минимальная длина пароля - 8 символов, ограничений по символам нет.

**Связанные сущности**:
- User: создание нового экземпляра сущности


Авторизованный пользователь имеет возможность:
- создать новый проект, передав название
   - **Связанные сущности**: `Project` (создание нового экземпляра), `User` (участвует в операции, создатель становится участником проекта)
- добавлять новых участников в проект
   - **Связанные сущности**: `Project` (изменение сущности), `User` (участвует в операции, находим нужного пользователя в системе)
- добавлять новые задачи в проект
   - **Связанные сущности**: `Project` (изменение сущности), `Task` (создание нового экземпляра), `Status` (участвует в операции, присвоение статуса "CREATED" по умолчанию)
- изменить имя задачи
   - **Связанные сущности**: `Task` (изменение сущности), `ChangeLog` (создание новой сущности)
- поставить любого пользователя-участника проекта исполнителем любой задачи данного проекта
   - **Связанные сущности**: `Task` (изменение сущности), `ChangeLog` (создание новой сущности), `User` (участвует в операции)
- создать статус внутри проекта, передавая название статуса и цвет для отображения в UI. Статус по умолчанию (default status) "CREATED"
   - **Связанные сущности**: `Status` (создание новой сущности)
- изменить любой задаче статус
   - **Связанные сущности**: `Task` (изменение сущности), `ChangeLog` (создание новой сущности)
- удалить статус, если не присвоен ни одной задаче в проекте
   - **Связанные сущности**: `Status` (удаление сущности)
- просматривать список проектов, в которых он является участником
   - **Связанные сущности**: `User` (участвует в операции), `Project` (участвует в операции)
- просматривать проект, в котором участвует: список задач, участников
   - **Связанные сущности**: `Project`, `User`, `Task` (участвуют в операции)
- выйти из системы
   - **Связанные сущности**: `User` (участвует в операции)

## Анализ инвариантов и требуемой согласованности
1. Пользователь (User)
   Инварианты:
   • Уникальность логина.
   • Соответствие логина правилам (латинские буквы и цифры, длина не менее 5 символов).
   • Пароль должен соответствовать минимальным требованиям безопасности (длина не менее 8 символов).
   Транзакционность:
   • При создании или обновлении пользователя необходима строгая согласованность, чтобы гарантировать уникальность логина и соответствие требованиям безопасности пароля.
2. Проект (Project)
   Инварианты:
   • Название проекта должно быть уникальным в рамках системы.
   • Участники проекта должны существовать в системе (валидные ID пользователей).
   • Список задач привязан к проекту.
   •	Лог изменений должен сохранять точное время и соответствующие данные.
   Транзакционность:
   • При создании проекта требуется транзакционность, чтобы гарантировать связь с существующими пользователями и уникальность названия проекта. Однако обновление списка участников или задач в проекте может быть выполнено с конечной согласованностью.
3. Задача (Task)
   Инварианты:
   • Статус задачи должен быть валидным (например, "В работе", "Выполнено").
   • Исполнитель должен быть существующим пользователем.
   • Задача должна быть привязана к существующему проекту.
   •	Лог изменений должен сохранять точное время и соответствующие данные.
   Транзакционность:
   • При создании задачи требуется транзакционность для проверки валидности статуса, исполнителя и проекта. Однако при изменении статуса задачи или исполнителя, бизнес может перенести это изменение с конечной согласованностью.

## Агрегаты
1. Агрегат "Пользователь"
   o Состав: Пользователь.
   o Контекст: Управление учетными записями, авторизация и регистрация.
   o Обоснование: Пользователь — это главная сущность системы, от которой зависят другие действия, такие как создание проектов и задач. Для выполнения любой операции пользователь должен быть авторизован.
2. Агрегат "Проект"
   o Состав: Проект, Список участников (связь с пользователями), Список задач, Запись об изменениях.
   o Контекст: Управление проектами, управление историей изменений, создание и редактирование проектов.
   o Обоснование: Проект — это ключевая единица для организации работы. Все задачи и участники привязаны к конкретным проектам. Проект управляет доступом участников к задачам и отслеживает их прогресс.
3. Агрегат "Задача"
   o Состав: Задача, Исполнитель (связь с пользователем), Статус задачи, Запись об изменениях.
   o Контекст: Управление задачами, управление историей изменений, назначение исполнителей.
   o Обоснование: Задача — это основной элемент работы в проекте. Задача имеет множество состояний и может изменяться в процессе работы, при этом важно следить за ее статусом и исполнителем



Таким образом, структура агрегатов позволяет обеспечить необходимую согласованность и целостность данных, одновременно повышая производительность системы за счет использования конечной согласованности там, где это возможно.
 